{% extends 'partials/base.html' %}

{% block title %}UPLOAD FILE{% endblock %}

{% block content %}

<style>

    .t1{
        font-size: 44px;
        color: rgba(58.58, 61.92, 142.02, 0.90);
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
   }

    .upload{
        border: none;
        background: none;
        font-size: 20px;
        font-weight: 600;
        color: black;
        margin-left: 40px;
        background: rgba(203, 204, 240, 1);
    }

    .upload:hover{
        text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.25);
    }

    ::-webkit-file-upload-button{
        border-radius: 20px;
        background: none;
        font-size: 20px;
        font-weight: 600;
        line-height: 24.43px;
        word-wrap: break-word;
        padding-bottom: 3px;
        margin-right: 20px;
    }

    ::-webkit-file-upload-button:hover{
        text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.25);
    }

    .a1{
        margin-left: 420px;
        border-color: rgba(58.58, 61.92, 142.02, 0.90);
        border-style: solid;
        border-width: 2px;
        color: black;
    }

    .a1:hover{
        text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.25);
    }


</style>

<div class="container">
    <div class="col-md-12">
        <div class="border p-5 shadow">
        <h1 class="text-center mt-2 t1" > Please upload your CSV file </h1>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row content">
                <div class="col pt-5"> <br>
                    <input type="file" name="document" id="document" required="required">
                </div>
                <div class="col pt-3 mb-3 mt-4">
                    <p id="id1">Label</p>
                    <input type="text" name="attribute1" id="attributeid1" required="required">
                </div>
                <div class="col pt-3 mb-3 mt-4">
                    <p id="id2">Data</p>
                    <input type="text" name="attribute2" id="attributeid2" required="required">
                </div>

                <div class="col pt-5"> <br>
                    <button type="submit" class="btn upload">Upload</button>
                </div>

                <div class="nav-item dropdown mt-3">
                    <a class="nav-link dropdown-toggle a1" href="#" role="button" data-toggle="dropdown" aria-expanded="false">
                      Algorithms
                    </a>
                    <div class="dropdown-menu">
                      <a class="dropdown-item" href="#">Sort</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">Search</a>
                    </div>
                </div>

            </div>
        </form>
        </div>
        {% if listlabels and listdatas %}
            <div class="pt-5">
                <div>
                    <!-- Display your chart here using listlabels and listdatas -->
                    <!-- Example: -->
                    <canvas id="myChart" width="400" height="400" class="mb-4"></canvas>
                    <script>
                        var ctx = document.getElementById('myChart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: {{ listlabels|safe }},
                                datasets: [{
                                    label: 'Attribute2',
                                    data: {{ listdatas|safe }},
                                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                    borderColor: 'rgba(75, 192, 192, 1)',
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                    </script>
                </div>
            </div>
        {% endif %}

        {% block messages %}
            {% if messages %}
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            {% endif %}
        {% endblock %}
    </div>
</div>

{% endblock %}

